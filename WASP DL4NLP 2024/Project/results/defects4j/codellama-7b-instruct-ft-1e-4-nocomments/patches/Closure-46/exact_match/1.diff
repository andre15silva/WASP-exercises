diff --git a/tmp/c5ae1f4a-b3cc-4f02-be50-c08f95304665_buggy.java b/tmp/22183a7f-14c4-450a-b3b7-c27d067f346b_fixed.java
index 46817a7..1c80502 100644
--- a/tmp/c5ae1f4a-b3cc-4f02-be50-c08f95304665_buggy.java
+++ b/tmp/22183a7f-14c4-450a-b3b7-c27d067f346b_fixed.java
@@ -1,16 +1,41 @@
   @Override
   public JSType getLeastSupertype(JSType that) {
     if (!that.isRecordType()) {
       return super.getLeastSupertype(that);
     }
-    RecordTypeBuilder builder = new RecordTypeBuilder(registry);
+    StringBuilder builder = new StringBuilder();
+    builder.append("{");
     for (String property : properties.keySet()) {
       if (that.toMaybeRecordType().hasProperty(property) &&
           that.toMaybeRecordType().getPropertyType(property).isEquivalentTo(
               getPropertyType(property))) {
-        builder.addProperty(property, getPropertyType(property),
-            getPropertyNode(property));
+        if (builder.length() != 1) {
+           builder.append(", ");
         }
+        builder.append(property).append(":")
+               .append(getPropertyType(property).toString());
       }
-    return builder.build();
+    }
+    builder.append("}");
+    RecordTypeBuilder b = new RecordTypeBuilder(registry);
+    StringBuilder sup = new StringBuilder();
+    sup.append("{");
+    for (String property : that.toMaybeRecordType().getPropertyNames()) {
+      if (!this.hasProperty(property)) {
+        if (sup.length() != 1) {
+           sup.append(", ");
+        }
+        sup.append(property).append(":")
+            .append(that.toMaybeRecordType().getPropertyType(property)
+                .toString());
+      }
+    }
+    sup.append("}");
+    JSType otherRecordType = registry.createAnonymousRecordType(
+        builder.toString(),
+        b.addRecordType(builder.toString()).build());
+    JSType supRecordType = registry.createAnonymousRecordType(
+        sup.toString(),
+        b.addRecordType(sup.toString()).build());
+    return registry.createUnionType(recordType, otherRecordType);
   }
\ No newline at end of file
