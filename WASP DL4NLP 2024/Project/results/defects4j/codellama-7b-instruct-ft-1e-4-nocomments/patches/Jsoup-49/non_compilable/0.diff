diff --git a/tmp/7d3f2d90-d955-4cb7-a4a8-716cf13f6033_buggy.java b/tmp/05d48eb4-7a82-4348-9448-3568443fa046_fixed.java
index a37dc7a..327a58a 100644
--- a/tmp/7d3f2d90-d955-4cb7-a4a8-716cf13f6033_buggy.java
+++ b/tmp/05d48eb4-7a82-4348-9448-3568443fa046_fixed.java
@@ -1,10 +1,17 @@
     protected void addChildren(int index, Node... children) {
         Validate.noNullElements(children);
         ensureChildNodes();
         for (int i = children.length - 1; i >= 0; i--) {
-            Node in = children[i];
-            reparentChild(in);
-            childNodes.add(index, in);
+            Node from = children[i];
+            Node p = from.getParentNode();
+            if (p == this) {
+                int pos = p.indexOf(from);
+                reparentChild(from);
+                p.removeChild(pos);
+            } else {
+                reparentChild(from);
+            }
+            childNodes.add(index, from);
         }
         reindexChildren(index);
     }
\ No newline at end of file
