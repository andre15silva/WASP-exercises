diff --git a/tmp/1a152e00-27c0-44de-a049-ffffca3ee311_buggy.java b/tmp/963e324f-9fac-4b10-bf60-30be759dceb3_fixed.java
index a37dc7a..cc8bb11 100644
--- a/tmp/1a152e00-27c0-44de-a049-ffffca3ee311_buggy.java
+++ b/tmp/963e324f-9fac-4b10-bf60-30be759dceb3_fixed.java
@@ -1,10 +1,12 @@
     protected void addChildren(int index, Node... children) {
         Validate.noNullElements(children);
         ensureChildNodes();
         for (int i = children.length - 1; i >= 0; i--) {
             Node in = children[i];
+            if (in == ownerDocument && in.parentNode == parentNode)
+                ((Element) in).setParent(this);
             reparentChild(in);
             childNodes.add(index, in);
         }
         reindexChildren(index);
     }
\ No newline at end of file
