diff --git a/tmp/2b408611-a4cf-4799-b6fc-9d317e19836a_buggy.java b/tmp/c2729e82-320b-4d69-98aa-722dd346a346_fixed.java
index 6e45f80..fc79c33 100644
--- a/tmp/2b408611-a4cf-4799-b6fc-9d317e19836a_buggy.java
+++ b/tmp/c2729e82-320b-4d69-98aa-722dd346a346_fixed.java
@@ -1,21 +1,36 @@
   /**
    * Returns a factory for all subtypes of {@code typeAdapter}. We do a runtime check to confirm
    * that the deserialized type matches the type requested.
    */
   public static <T1> TypeAdapterFactory newTypeHierarchyFactory(
       final Class<T1> clazz, final TypeAdapter<T1> typeAdapter) {
     return new TypeAdapterFactory() {
       @SuppressWarnings("unchecked")
       public <T2> TypeAdapter<T2> create(Gson gson, TypeToken<T2> typeToken) {
         final Class<? super T2> requestedType = typeToken.getRawType();
         if (!clazz.isAssignableFrom(requestedType)) {
           return null;
         }
+        // if the original type is a JsonElement, allow anything to be deserialized into it
+        if (clazz == com.google.gson.JsonElement.class) {
           return (TypeAdapter<T2>) typeAdapter;
+        }
+        return (TypeAdapter<T2>) new TypeAdapter<T2>() {
+          @Override
+          public void write(JsonWriter json, T2 value) throws IOException {
+            throw new UnsupportedOperationException();
+          }
 
+          @Override
+          public T2 read(JsonReader json) throws IOException {
+            throw new UnsupportedOperationException();
           }
+
           @Override public String toString() {
             return "Factory[typeHierarchy=" + clazz.getName() + ",adapter=" + typeAdapter + "]";
           }
         };
+
+      }
+    };
   }
