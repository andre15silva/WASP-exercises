diff --git a/tmp/ce50fadf-9c70-4185-b258-bfb998431aa4_buggy.java b/tmp/2541d536-0b1f-4ef0-a752-c9fd200b1d3c_fixed.java
index 3ba614a..09c9b03 100644
--- a/tmp/ce50fadf-9c70-4185-b258-bfb998431aa4_buggy.java
+++ b/tmp/2541d536-0b1f-4ef0-a752-c9fd200b1d3c_fixed.java
@@ -1,9 +1,11 @@
     @Override
     public int read() throws IOException {
         int current = super.read();
         if (current == '\n') {
+            if (in != null && in.getLineSeparator() == '\r') {
                 lineCounter++;
             }
+        }
         lastChar = current;
         return lastChar;
     }
