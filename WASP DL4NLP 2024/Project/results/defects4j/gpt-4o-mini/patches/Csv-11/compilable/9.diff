diff --git a/tmp/b8f71a9b-3990-4917-a26b-008ed38e1ff1_buggy.java b/tmp/0330789f-1ef9-4d8a-859c-9de5784c0015_fixed.java
index 784bbab..7cc22ae 100644
--- a/tmp/b8f71a9b-3990-4917-a26b-008ed38e1ff1_buggy.java
+++ b/tmp/0330789f-1ef9-4d8a-859c-9de5784c0015_fixed.java
@@ -1,42 +1,38 @@
-    /**
-     * Initializes the name to index mapping if the format defines a header.
-     *
-     * @return null if the format has no header.
-     * @throws IOException if there is a problem reading the header or skipping the first record
-     */
 private Map<String, Integer> initializeHeader() throws IOException {
     Map<String, Integer> hdrMap = null;
     final String[] formatHeader = this.format.getHeader();
-        if (formatHeader != null) {
+    
+    // Ensure the map is initialized regardless of header presence
     hdrMap = new LinkedHashMap<String, Integer>();
     
     String[] headerRecord = null;
-            if (formatHeader.length == 0) {
+    if (formatHeader != null && formatHeader.length > 0) {
+        if (this.format.getSkipHeaderRecord()) {
+            this.nextRecord();
+        }
+        headerRecord = formatHeader;
+    } else {
         // read the header from the first line of the file
         final CSVRecord nextRecord = this.nextRecord();
         if (nextRecord != null) {
             headerRecord = nextRecord.values();
         }
-            } else {
-                if (this.format.getSkipHeaderRecord()) {
-                    this.nextRecord();
-                }
-                headerRecord = formatHeader;
     }
 
     // build the name to index mappings
     if (headerRecord != null) {
         for (int i = 0; i < headerRecord.length; i++) {
             final String header = headerRecord[i];
             final boolean containsHeader = hdrMap.containsKey(header);
             final boolean emptyHeader = header.trim().isEmpty();
             if (containsHeader && (!emptyHeader || (emptyHeader && !this.format.getIgnoreEmptyHeaders()))) {
                 throw new IllegalArgumentException("The header contains a duplicate name: \"" + header +
                         "\" in " + Arrays.toString(headerRecord));
             }
             hdrMap.put(header, Integer.valueOf(i));
         }
     }
-        }
+    
+    // Return hdrMap even if it's empty
     return hdrMap;
 }
\ No newline at end of file
