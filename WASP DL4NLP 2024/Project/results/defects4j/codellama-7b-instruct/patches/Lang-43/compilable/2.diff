diff --git a/tmp/1a0addba-4734-467e-ae11-fc108997a6b0_buggy.java b/tmp/ed7a6e17-be9c-4dfd-8a1c-932bb0cfb266_fixed.java
index b6b11b6..2d1d978 100644
--- a/tmp/1a0addba-4734-467e-ae11-fc108997a6b0_buggy.java
+++ b/tmp/ed7a6e17-be9c-4dfd-8a1c-932bb0cfb266_fixed.java
@@ -1,38 +1,40 @@
+
     /**
      * Consume a quoted string, adding it to <code>appendTo</code> if
      * specified.
      * 
      * @param pattern pattern to parse
      * @param pos current parse position
      * @param appendTo optional StringBuffer to append
      * @param escapingOn whether to process escaped quotes
      * @return <code>appendTo</code>
      */
+
     private StringBuffer appendQuotedString(String pattern, ParsePosition pos,
             StringBuffer appendTo, boolean escapingOn) {
         int start = pos.getIndex();
         char[] c = pattern.toCharArray();
-        if (escapingOn && c[start] == QUOTE) {
-            return appendTo == null ? null : appendTo.append(QUOTE);
-        }
         int lastHold = start;
+        while (appendTo == null ||
+                appendTo.append(c, lastHold, pos.getIndex() - lastHold).length()
+          == 0) {
             for (int i = pos.getIndex(); i < pattern.length(); i++) {
                 if (escapingOn && pattern.substring(i).startsWith(ESCAPED_QUOTE)) {
-                appendTo.append(c, lastHold, pos.getIndex() - lastHold).append(
-                        QUOTE);
+                    appendTo.append(c, lastHold, pos.getIndex() - lastHold).append("\"");
                     pos.setIndex(i + ESCAPED_QUOTE.length());
                     lastHold = pos.getIndex();
                     continue;
                 }
                 switch (c[pos.getIndex()]) {
                 case QUOTE:
                     next(pos);
-                return appendTo == null ? null : appendTo.append(c, lastHold,
-                        pos.getIndex() - lastHold);
+                    return appendTo != null ? appendTo : null;
                 default:
                     next(pos);
                 }
             }
             throw new IllegalArgumentException(
                     "Unterminated quoted string at position " + start);
         }
+        return appendTo;
+    }
