diff --git a/tmp/d01a751f-cf23-4487-a5e7-e0717aec5501_buggy.java b/tmp/428535ac-cf66-4a0e-aa7f-13f3f6ba58dd_fixed.java
index 9529ba6..157efba 100644
--- a/tmp/d01a751f-cf23-4487-a5e7-e0717aec5501_buggy.java
+++ b/tmp/428535ac-cf66-4a0e-aa7f-13f3f6ba58dd_fixed.java
@@ -1,20 +1,22 @@
     public int writeValue() {
-        // Most likely, object:
+        // First, check if we're in an object
         if (_type == TYPE_OBJECT) {
-            _gotName = false;
+            // If we are in an object, we need to write the field name
+            if (!_gotName) {
+                _gotName = true;
                 ++_index;
                 return STATUS_OK_AFTER_COLON;
-        }
-
-        // Ok, array?
+            } else {
+                // If we're not in an object, we need to check if we're in an array
                 if (_type == TYPE_ARRAY) {
                     int ix = _index;
                     ++_index;
                     return (ix < 0) ? STATUS_OK_AS_IS : STATUS_OK_AFTER_COMMA;
-        }
-        
-        // Nope, root context
-        // No commas within root context, but need space
+                } else {
+                    // If we're not in an object or an array, we need to write a space
                     ++_index;
                     return (_index == 0) ? STATUS_OK_AS_IS : STATUS_OK_AFTER_SPACE;
                 }
+            }
+        }
+    }
