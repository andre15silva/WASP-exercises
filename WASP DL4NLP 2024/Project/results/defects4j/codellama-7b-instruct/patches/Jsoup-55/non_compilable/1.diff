diff --git a/tmp/35083088-16c1-4566-b996-bf3ab0deed07_buggy.java b/tmp/187a9b89-a61f-4ef4-b29d-8ec56ef6d00d_fixed.java
index ef76662..e9fc05a 100644
--- a/tmp/35083088-16c1-4566-b996-bf3ab0deed07_buggy.java
+++ b/tmp/187a9b89-a61f-4ef4-b29d-8ec56ef6d00d_fixed.java
@@ -1,17 +1,22 @@
 void read(Tokeniser t, CharacterReader r) {
+    if(r.hasMore()) {
         char c = r.consume();
         switch (c) {
             case '>':
                 t.tagPending.selfClosing = true;
                 t.emitTagPending();
                 t.transition(Data);
                 break;
             case eof:
                 t.eofError(this);
                 t.transition(Data);
                 break;
             default:
                 t.error(this);
                 t.transition(BeforeAttributeName);
         }
+    } else {
+        t.eofError(this);
+        t.transition(Data);
+    }
 }
\ No newline at end of file
