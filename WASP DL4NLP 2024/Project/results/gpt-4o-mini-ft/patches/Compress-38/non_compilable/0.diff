diff --git a/tmp/39bc3bbe-3573-4891-b361-ccba2e0e5395_buggy.java b/tmp/82c1fd5d-39e6-4466-a86f-75dcc68b43b9_fixed.java
index 192e83d..b3f5880 100644
--- a/tmp/39bc3bbe-3573-4891-b361-ccba2e0e5395_buggy.java
+++ b/tmp/82c1fd5d-39e6-4466-a86f-75dcc68b43b9_fixed.java
@@ -1,21 +1,26 @@
     /**
      * Return whether or not this entry represents a directory.
      *
      * @return True if this entry is a directory.
      */
     @Override
     public boolean isDirectory() {
         if (file != null) {
             return file.isDirectory();
         }
 
         if (linkFlag == LF_DIR) {
             return true;
         }
 
-        if (getName().endsWith("/")) {
-            return true;
+        // if the name ends in "/" (and corresponds to a TAR entry),
+        // then preserve the "/" at the end when composing
+        // for the output stream of .tar, but remove for tar.gz/gzip streams.
+        String name = getName();
+        if (name.endsWith("/") && (linkFlag != LF_GNUTAR_LONGLINK)) {
+            name = name.substring(0, name.length() - 1);
         }
 
+        // TODO: return true for "/" [COMPRESS-356, COMPRESS-463]
         return false;
     }
