diff --git a/tmp/bc92f9d0-aeae-4763-b518-324d3eaf33ca_buggy.java b/tmp/81bd0cc7-06f2-46e2-a7c6-76854b81feb3_fixed.java
index a5093b1..b2ac62a 100644
--- a/tmp/bc92f9d0-aeae-4763-b518-324d3eaf33ca_buggy.java
+++ b/tmp/81bd0cc7-06f2-46e2-a7c6-76854b81feb3_fixed.java
@@ -1,11 +1,13 @@
     private static <E extends Element> Integer indexInList(Element search, List<E> elements) {
         Validate.notNull(search);
         Validate.notNull(elements);
 
         for (int i = 0; i < elements.size(); i++) {
             E element = elements.get(i);
-            if (element.equals(search))
+            // need to include an additional nextSibling().equals check to fix issue 1172 where document text nodes were being
+            // counted as siblings and the equal comparison fails if sibling child text nodes have the same content 
+            if (element.equals(search) && (search.nextSibling().equals(element.nextSibling()) || search.elementSiblingIndex() == element.elementSiblingIndex()))
                 return i;
         }
         return null;
     }
