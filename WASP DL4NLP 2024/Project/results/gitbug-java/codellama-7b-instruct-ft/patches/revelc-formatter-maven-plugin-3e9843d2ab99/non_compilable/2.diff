diff --git a/tmp/8c671929-3ac5-4861-a41c-0a105e869bf0_buggy.java b/tmp/dad4f879-c089-4ee3-aa38-e42c8dc2e76a_fixed.java
index 1098336..d06e7a0 100644
--- a/tmp/8c671929-3ac5-4861-a41c-0a105e869bf0_buggy.java
+++ b/tmp/dad4f879-c089-4ee3-aa38-e42c8dc2e76a_fixed.java
@@ -1,16 +1,20 @@
     @Override
     protected String doFormat(final String code, final LineEnding ending) throws IOException {
 
         final var source = new InputSource(new StringReader(code));
         final var parser = new CSSOMParser(new SACParserCSS3());
         final var sheet = (CSSStyleSheetImpl) parser.parseStyleSheet(source, null, null);
         var formattedCode = sheet.getCssText(this.formatter);
 
         // Patch converted 'tab' back to '\9' for IE 7,8, and 9 hack. Cssparser switches it to 'tab'.
         formattedCode = formattedCode.replace("\t;", "\\9;");
 
-        if (code.equals(formattedCode)) {
+        // Use the two pass formatter to handle multiple declarations with identical names like {margin-right: 0; margin-right: 0;}.
+        final var pass1 = this.formatter.newSourceCode(code);
+        final var pass2 = this.formatter.newSourceCode(formattedCode);
+        final String hash = DigestUtils.md5Hex(new ByteArrayInputStream(pass1.getCode().getBytes("UTF-8")));
+        if (hash.equals(DigestUtils.md5Hex(new ByteArrayInputStream(pass2.getCode().getBytes("UTF-8"))))) {
             return null;
         }
         return formattedCode;
     }
