diff --git a/tmp/a5da7a55-0cc3-498a-99df-7827814da94f_buggy.java b/tmp/63bf22d0-e537-4a7e-8f87-b1babcdc33c6_fixed.java
index dcc36a4..5be7d1b 100644
--- a/tmp/a5da7a55-0cc3-498a-99df-7827814da94f_buggy.java
+++ b/tmp/63bf22d0-e537-4a7e-8f87-b1babcdc33c6_fixed.java
@@ -1,12 +1,11 @@
-    protected void replaceChild(Node out, Node in) {
-        Validate.isTrue(out.parentNode == this);
-        Validate.notNull(in);
-        if (in.parentNode != null)
-            in.parentNode.removeChild(in);
+    @Test void replaceWithSelf() {
+        // https://github.com/jhy/jsoup/issues/1843
+        Document doc = Jsoup.parse("<p>One<p>Two");
+        Elements ps = doc.select("p");
+        Element first = ps.first();
 
-        final int index = out.siblingIndex;
-        ensureChildNodes().set(index, in);
-        in.parentNode = this;
-        in.setSiblingIndex(index);
-        out.parentNode = null;
+        assertNotNull(first);
+        first.replaceWith(first);
+        assertEquals(ps.get(1), first.nextSibling());
+        assertEquals("<p>One</p>\n<p>Two</p>", first.parent().html());
     }
\ No newline at end of file
