diff --git a/tmp/4ac9dc0d-7d55-43c3-8ad9-25344555823a_buggy.java b/tmp/0da2c071-c152-4d4b-b3f4-7e6ffae18263_fixed.java
index ae12a4d..1b5a41a 100644
--- a/tmp/4ac9dc0d-7d55-43c3-8ad9-25344555823a_buggy.java
+++ b/tmp/0da2c071-c152-4d4b-b3f4-7e6ffae18263_fixed.java
@@ -1,3 +1,5 @@
     private boolean isFormatAsBlock(Document.OutputSettings out) {
-        return tag.formatAsBlock() || (parent() != null && parent().tag().formatAsBlock()) || out.outline();
+        return tag.formatAsBlock() || (((parent() != null && parent().tag().formatAsBlock())
+                || parent() == null && out.prettyPrint())
+            && !tag.isNestedIn("p", "li"));
     }
\ No newline at end of file
